$(document).ready(()=>{let t=$("main .main_slider"),s=$("main .news_slider");t.slick({dots:!0,arrows:!1}),s.slick({infinite:!0,dots:!1,arrows:!0,slidesToShow:5,slidesToScroll:1,responsive:[{breakpoint:1200,settings:{slidesToShow:4}},{breakpoint:900,settings:{slidesToShow:3}},{breakpoint:640,settings:{slidesToShow:2}},{breakpoint:480,settings:{slidesToShow:1}}]}),$("form .rating ").find(".star").hover(function(){let t=$(this),s=t.closest("form").find('input[name="comment[rating]"]'),e=t.parent(),o=t.index();s.val(o+1);for(let t=0;t<=o;t++)e.find(".star").eq(t).removeClass("empty");for(let t=o+1;t<=5;t++)e.find(".star").eq(t).addClass("empty")})});let $product=$(".product[data-id]");$product.find(".buy_button").click(async function(){let t=$(this),s=t.closest(".product").attr("data-id"),e=new URL(window.location.protocol+"//"+window.location.host+"/api/cart/add"),o=t.closest(".product").find('input[name="product[count]"]'),a=1;o.length&&((a=(o=o.first()).val())||(a=1)),e.searchParams.append("product_id",s),e.searchParams.append("count",a);let i=await fetch(e),n='<span>Товар успешно добавлен в <a href="/cart"> корзину</a></span>';"OK"!=(i=await i.json()).status&&(n="Произошла ошибка при добавлении. попробуйте позже");let r=$("#popover");r.html(n),r.addClass("active"),r.offset(t.offset()),setInterval(()=>{r.removeClass("active")},3e3)}),$(".control.minus").click(function(){let t=$(this).next(),s=t.val();s>1&&s--,t.val(s)}),$(".control.plus").click(function(){let t=$(this).prev(),s=t.attr("max")||10,e=t.val();+e<+s&&e++,t.val(e)});